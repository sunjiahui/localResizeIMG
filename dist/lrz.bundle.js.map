{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///lrz.bundle.js","webpack:///webpack/bootstrap db29311f10992f0b2042","webpack:///./src/lrz.js","webpack:///src/lib/Promise.js","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///src/lib/Blob.FormData.shim.js","webpack:///src/lib/exif.js"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","parentJsonpFunction","window","chunkIds","moreModules","chunkId","callbacks","length","installedChunks","push","apply","shift","0","e","callback","undefined","head","document","getElementsByTagName","script","createElement","type","charset","async","src","p","appendChild","m","c","Lrz","file","opts","that","Error","defaults","width","height","minWidth","minHeight","customSize","fieldName","quality","wxLocalFile","hasOwnProperty","init","getJsDir","filter","scripts","v","indexOf","substr","lastIndexOf","dataURItoBlob","dataURI","byteString","split","atob","unescape","mimeString","ia","Uint8Array","charCodeAt","BlobFormDataShim","Blob","buffer","URL","webkitURL","Promise","exif","UA","userAgent","ISOldIOS","exec","isOldAndroid","oldIOS","pop","oldAndroid","iOS","test","android","mQQBrowser","navigator","prototype","fileIsString","fileIsBase64","img","Image","canvas","blob","createObjectURL","fileName","name","getContext","resolve","reject","onerror","onload","_getBase64","then","base64","formData","size","FormData","append","replace","fileLen","base64Len","origin","revokeObjectURL","crossOrigin","getData","orientation","getTag","resize","_getResize","ctx","fillStyle","fillRect","_createBase64ForOldIOS","_createBase64","err","__WEBPACK_AMD_REQUIRE_ARRAY__","MegaPixImage","mpImg","render","toDataURL","rotate","Math","PI","drawImage","translate","scale","JPEGEncoder","encoder","getImageData","encode","_getMaxSize","w","h","option","ret","ceil","_getMinSize","lrz","version","setImmediate","bind","fn","thisArg","arguments","TypeError","_state","_value","_deferreds","doResolve","handle","deferred","me","asap","cb","onFulfilled","onRejected","newValue","finale","len","Handler","done","value","reason","ex","setTimeout","isArray","Array","Object","toString","all","args","slice","res","val","remaining","constructor","race","values","_setImmediateFn","always","clearImmediate","Timeout","clearFn","_id","_clearFn","nextTick","Function","immediateIds","nextImmediateId","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","run","Item","array","noop","process","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","hasFormDataBug","bCheck","vendor","match","BlobConstructor","parts","bb","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","forEach","getBlob","FormDataShim","formDataShimNums","o","boundary","join","Date","random","oldSend","XMLHttpRequest","send","getParts","filename","fr","data","oXHR","FileReader","result","readAsArrayBuffer","setRequestHeader","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","imageHasData","base64ToArrayBuffer","contentType","binary","ArrayBuffer","view","objectURLToBlob","url","http","open","responseType","status","response","handleBinaryFile","binFile","findEXIFinJPEG","iptcdata","findIPTCinJPEG","exifdata","arrayBuffer","fileReader","target","File","debug","console","log","byteLength","dataView","DataView","getUint8","offset","readEXIFData","getUint16","isFieldSegmentStart","nameHeaderLength","startOffset","sectionLength","readIPTCData","fieldValue","dataSize","segmentType","segmentSize","segmentStartPos","IptcFieldMap","getInt16","getStringFromDB","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","vals","n","numerator","denominator","numValues","getUint32","valueOffset","Number","getInt32","start","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","firstIFDOffset","TiffTags","ExifIFDPointer","ExifTags","StringValues","Components","GPSInfoIFDPointer","GPSTags","EXIF","obj","EXIFwrapped","Tags","36864","40960","40961","40962","40963","37121","37122","37500","37510","40964","36867","36868","37520","37521","37522","33434","33437","34850","34852","34855","34856","37377","37378","37379","37380","37381","37382","37383","37384","37385","37396","37386","41483","41484","41486","41487","41488","41492","41493","41495","41728","41729","41730","41985","41986","41987","41988","41989","41990","41991","41992","41993","41994","41995","41996","40965","42016","256","257","34665","34853","258","259","262","274","277","284","530","531","282","283","296","273","278","279","513","514","301","318","319","529","532","306","270","271","272","305","315","33432","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","ExposureProgram","MeteringMode","255","LightSource","Flash","31","32","65","69","71","73","77","79","89","93","95","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","120","110","55","80","85","122","105","116","HTMLImageElement","complete","getAllTags","pretty","strPretty","readFromBinaryFile"],"mappings":"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","file":"lrz.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId])\n/******/ \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n/******/ \t\twhile(callbacks.length)\n/******/ \t\t\tcallbacks.shift().call(null, __webpack_require__);\n/******/\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// object to store loaded and loading chunks\n/******/ \t// \"0\" means \"already loaded\"\n/******/ \t// Array means \"loading\", array contains callbacks\n/******/ \tvar installedChunks = {\n/******/ \t\t0:0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n/******/ \t\t// \"0\" is the signal for \"already loaded\"\n/******/ \t\tif(installedChunks[chunkId] === 0)\n/******/ \t\t\treturn callback.call(null, __webpack_require__);\n/******/\n/******/ \t\t// an array means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId] !== undefined) {\n/******/ \t\t\tinstalledChunks[chunkId].push(callback);\n/******/ \t\t} else {\n/******/ \t\t\t// start chunk loading\n/******/ \t\t\tinstalledChunks[chunkId] = [callback];\n/******/ \t\t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\t\tvar script = document.createElement('script');\n/******/ \t\t\tscript.type = 'text/javascript';\n/******/ \t\t\tscript.charset = 'utf-8';\n/******/ \t\t\tscript.async = true;\n/******/\n/******/ \t\t\tscript.src = __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".chunk.js\";\n/******/ \t\t\thead.appendChild(script);\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 保证按需加载的文件路径正确\n\t__webpack_require__.p = getJsDir('lrz') + '/';\n\twindow.URL              = window.URL || window.webkitURL;\n\t\n\tvar Promise          = __webpack_require__(1),\n\t    BlobFormDataShim = __webpack_require__(4),\n\t    exif             = __webpack_require__(5);\n\t\n\t\n\tvar UA = (function (userAgent) {\n\t    var ISOldIOS     = /OS (\\d)_.* like Mac OS X/g.exec(userAgent),\n\t        isOldAndroid = /Android (\\d.*?);/g.exec(userAgent) || /Android\\/(\\d.*?) /g.exec(userAgent);\n\t\n\t    // 判断设备是否是IOS7以下\n\t    // 判断设备是否是android4.5以下\n\t    // 判断是否iOS\n\t    // 判断是否android\n\t    // 判断是否QQ浏览器\n\t    return {\n\t        oldIOS    : ISOldIOS ? +ISOldIOS.pop() < 8 : false,\n\t        oldAndroid: isOldAndroid ? +isOldAndroid.pop().substr(0, 3) < 4.5 : false,\n\t        iOS       : /\\(i[^;]+;( U;)? CPU.+Mac OS X/.test(userAgent),\n\t        android   : /Android/g.test(userAgent),\n\t        mQQBrowser: /MQQBrowser/g.test(userAgent)\n\t    }\n\t})(navigator.userAgent);\n\t\n\t\n\tfunction Lrz (file, opts) {\n\t    var that = this;\n\t\n\t    if (!file) throw new Error('没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7');\n\t\n\t    opts = opts || {};\n\t\n\t    that.defaults = {\n\t        width    : null,\n\t        height   : null,\n\t        minWidth : null,\n\t        minHeight: null,\n\t        customSize: null,\n\t        fieldName: 'file',\n\t        quality  : 0.7,\n\t        wxLocalFile: false\n\t    };\n\t\n\t    that.file = file;\n\t\n\t    for (var p in opts) {\n\t        if (!opts.hasOwnProperty(p)) continue;\n\t        that.defaults[p] = opts[p];\n\t    }\n\t\n\t    return this.init();\n\t}\n\t\n\tLrz.prototype.init = function () {\n\t    var that         = this,\n\t        file         = that.file,\n\t        fileIsString = typeof file === 'string',\n\t        fileIsBase64 = /^data:/.test(file),\n\t        img          = new Image(),\n\t        canvas       = document.createElement('canvas'),\n\t        blob         = fileIsString ? file : URL.createObjectURL(file);\n\t\n\t    that.img    = img;\n\t    that.blob   = blob;\n\t    that.canvas = canvas;\n\t\n\t    if (fileIsString) {\n\t        that.fileName = fileIsBase64 ? 'base64.jpg' : (file.split('/').pop());\n\t    } else {\n\t        that.fileName = file.name;\n\t    }\n\t\n\t    if (!document.createElement('canvas').getContext) {\n\t        throw new Error('浏览器不支持canvas');\n\t    }\n\t\n\t    return new Promise(function (resolve, reject) {\n\t        img.onerror = function () {\n\t            throw new Error('加载图片文件失败');\n\t        };\n\t\n\t        img.onload = function () {\n\t            that._getBase64()\n\t                .then(function (base64) {\n\t                    if (base64.length < 10) reject('生成base64失败');\n\t\n\t                    return base64;\n\t                })\n\t                .then(function (base64) {\n\t                    var formData = null;\n\t\n\t                    // 压缩文件太大就采用源文件,且使用原生的FormData() @source #55\n\t                    if (typeof that.file === 'object' && base64.length > that.file.size) {\n\t                        formData = new FormData();\n\t                        file     = that.file;\n\t                    } else {\n\t                        formData = new BlobFormDataShim.FormData();\n\t                        file     = dataURItoBlob(base64);\n\t                    }\n\t\n\t                    formData.append(that.defaults.fieldName, file, (that.fileName.replace(/\\..+/g, '.jpg')));\n\t\n\t                    resolve({\n\t                        formData : formData,\n\t                        fileLen : +file.size,\n\t                        base64  : base64,\n\t                        base64Len: base64.length,\n\t                        origin   : that.file,\n\t                        file   : file\n\t                    });\n\t\n\t                    // 释放内存\n\t                    for (var p in that) {\n\t                        if (!that.hasOwnProperty(p)) continue;\n\t\n\t                        that[p] = null;\n\t                    }\n\t                    URL.revokeObjectURL(that.blob);\n\t                });\n\t        };\n\t\n\t        // 如果传入的是base64在移动端会报错\n\t        !fileIsBase64 && !that.wxLocalFile && (img.crossOrigin = \"*\");\n\t\n\t        img.src = blob;\n\t    });\n\t};\n\t\n\tLrz.prototype._getBase64 = function () {\n\t    var that   = this,\n\t        img    = that.img,\n\t        file   = that.file,\n\t        canvas = that.canvas;\n\t\n\t    return new Promise(function (resolve) {\n\t        try {\n\t            // 传入blob在android4.3以下有bug\n\t            exif.getData(typeof file === 'object' ? file : img, function () {\n\t                that.orientation = exif.getTag(this, \"Orientation\");\n\t\n\t                that.resize = that._getResize();\n\t                that.ctx    = canvas.getContext('2d');\n\t\n\t                canvas.width  = that.resize.width;\n\t                canvas.height = that.resize.height;\n\t\n\t                // 设置为白色背景，jpg是不支持透明的，所以会被默认为canvas默认的黑色背景。\n\t                that.ctx.fillStyle = '#fff';\n\t                that.ctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\n\t                // 根据设备对应处理方式\n\t                if (UA.oldIOS) {\n\t                    that._createBase64ForOldIOS().then(resolve);\n\t                }\n\t                else {\n\t                    that._createBase64().then(resolve);\n\t                }\n\t            });\n\t        } catch (err) {\n\t            // 这样能解决低内存设备闪退的问题吗？\n\t            throw new Error(err);\n\t        }\n\t    });\n\t};\n\t\n\t\n\tLrz.prototype._createBase64ForOldIOS = function () {\n\t    var that        = this,\n\t        img         = that.img,\n\t        canvas      = that.canvas,\n\t        defaults    = that.defaults,\n\t        orientation = that.orientation;\n\t\n\t    return new Promise(function (resolve) {\n\t        __webpack_require__.e/* require */(1, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(6)]; (function (MegaPixImage) {\n\t            var mpImg = new MegaPixImage(img);\n\t\n\t            if (\"5678\".indexOf(orientation) > -1) {\n\t                mpImg.render(canvas, {\n\t                    width      : canvas.height,\n\t                    height     : canvas.width,\n\t                    orientation: orientation\n\t                });\n\t            } else {\n\t                mpImg.render(canvas, {\n\t                    width      : canvas.width,\n\t                    height     : canvas.height,\n\t                    orientation: orientation\n\t                });\n\t            }\n\t\n\t            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\n\t        }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));});\n\t    });\n\t};\n\t\n\tLrz.prototype._createBase64 = function () {\n\t    var that        = this,\n\t        resize      = that.resize,\n\t        img         = that.img,\n\t        canvas      = that.canvas,\n\t        ctx         = that.ctx,\n\t        defaults    = that.defaults,\n\t        orientation = that.orientation;\n\t\n\t    // 调整为正确方向\n\t    switch (orientation) {\n\t        case 3:\n\t            ctx.rotate(180 * Math.PI / 180);\n\t            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\n\t            break;\n\t        case 6:\n\t            ctx.rotate(90 * Math.PI / 180);\n\t            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\n\t            break;\n\t        case 8:\n\t            ctx.rotate(270 * Math.PI / 180);\n\t            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\n\t            break;\n\t\n\t        case 2:\n\t            ctx.translate(resize.width, 0);\n\t            ctx.scale(-1, 1);\n\t            ctx.drawImage(img, 0, 0, resize.width, resize.height);\n\t            break;\n\t        case 4:\n\t            ctx.translate(resize.width, 0);\n\t            ctx.scale(-1, 1);\n\t            ctx.rotate(180 * Math.PI / 180);\n\t            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\n\t            break;\n\t        case 5:\n\t            ctx.translate(resize.width, 0);\n\t            ctx.scale(-1, 1);\n\t            ctx.rotate(90 * Math.PI / 180);\n\t            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\n\t            break;\n\t        case 7:\n\t            ctx.translate(resize.width, 0);\n\t            ctx.scale(-1, 1);\n\t            ctx.rotate(270 * Math.PI / 180);\n\t            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\n\t            break;\n\t\n\t        default:\n\t            ctx.drawImage(img, 0, 0, resize.width, resize.height);\n\t    }\n\t\n\t    return new Promise(function (resolve) {\n\t        if (UA.oldAndroid || UA.mQQBrowser || !navigator.userAgent) {\n\t            __webpack_require__.e/* require */(2, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(7)]; (function (JPEGEncoder) {\n\t                var encoder = new JPEGEncoder(),\n\t                    img     = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\n\t                resolve(encoder.encode(img, defaults.quality * 100));\n\t            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));})\n\t        }\n\t        else {\n\t            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\n\t        }\n\t    });\n\t};\n\t\n\tLrz.prototype._getMaxSize = function (w, h, option) {\n\t    var ret = {width: w, height: h};\n\t    var width = option.width;\n\t    var height = option.height;\n\t    // 如果原图小于设定，采用原图\n\t    if (ret.width < width || ret.height < height) {\n\t        return ret;\n\t    }\n\t\n\t    var scale = ret.width / ret.height;\n\t\n\t    if (width && height) {\n\t        if (scale >= width / height) {\n\t            if (ret.width > width) {\n\t                ret.width  = width;\n\t                ret.height = Math.ceil(width / scale);\n\t            }\n\t        } else {\n\t            if (ret.height > height) {\n\t                ret.height = height;\n\t                ret.width  = Math.ceil(height * scale);\n\t            }\n\t        }\n\t    }\n\t    else if (width) {\n\t        if (width < ret.width) {\n\t            ret.width  = width;\n\t            ret.height = Math.ceil(width / scale);\n\t        }\n\t    }\n\t    else if (height) {\n\t        if (height < ret.height) {\n\t            ret.width  = Math.ceil(height * scale);\n\t            ret.height = height;\n\t        }\n\t    }\n\t    // 超过这个值base64无法生成，在IOS上\n\t    while (ret.width >= 3264 || ret.height >= 2448) {\n\t        ret.width *= 0.8;\n\t        ret.height *= 0.8;\n\t    }\n\t    return ret;\n\t};\n\t\n\tLrz.prototype._getMinSize = function (w, h, option) {\n\t    var ret = {width: w, height: h};\n\t    var width = option.minWidth;\n\t    var height = option.minHeight;\n\t    // 如果原图小于设定，采用原图\n\t    var scale = ret.width / ret.height;\n\t\n\t    if (width && height) {\n\t        if (scale >= width / height) {\n\t            ret.height  = height;\n\t            ret.width = Math.ceil(ret.height * scale);\n\t        } else {\n\t            ret.width = width;\n\t            ret.height = Math.ceil(ret.width / scale);\n\t        }\n\t    }\n\t    else if (width) {\n\t        ret.width = width;\n\t        ret.height = Math.ceil(ret.width / scale);\n\t    }\n\t    else if (height) {\n\t        ret.height  = height;\n\t        ret.width = Math.ceil(ret.height * scale);\n\t    }\n\t    // 超过这个值base64无法生成，在IOS上\n\t    while (ret.width >= 3264 || ret.height >= 2448) {\n\t        ret.width *= 0.8;\n\t        ret.height *= 0.8;\n\t    }\n\t    return ret;\n\t};\n\t\n\tLrz.prototype._getResize = function () {\n\t    var that        = this,\n\t        img         = that.img,\n\t        defaults    = that.defaults,\n\t        width       = defaults.width,\n\t        height      = defaults.height,\n\t        orientation = that.orientation;\n\t\n\t    var ret = {\n\t        width : img.width,\n\t        height: img.height\n\t    };\n\t\n\t    if (\"5678\".indexOf(orientation) > -1) {\n\t        ret.width  = img.height;\n\t        ret.height = img.width;\n\t    }\n\t    if (width || height) {\n\t        ret = this._getMaxSize(ret.width, ret.height, defaults);\n\t    } else if (defaults.minWidth || defaults.minHeight) {\n\t        ret = this._getMinSize(ret.width, ret.height, defaults);\n\t    } else if (defaults.customSize) {\n\t        ret = defaults.customSize(ret.width, ret.height, defaults);\n\t    }\n\t\n\t    // 如果原图小于设定，采用原图\n\t    if (ret.width < width || ret.height < height) {\n\t        return ret;\n\t    }\n\t\n\t    var scale = ret.width / ret.height;\n\t\n\t    if (width && height) {\n\t        if (scale >= width / height) {\n\t            if (ret.width > width) {\n\t                ret.width  = width;\n\t                ret.height = Math.ceil(width / scale);\n\t            }\n\t        } else {\n\t            if (ret.height > height) {\n\t                ret.height = height;\n\t                ret.width  = Math.ceil(height * scale);\n\t            }\n\t        }\n\t    }\n\t    else if (width) {\n\t        if (width < ret.width) {\n\t            ret.width  = width;\n\t            ret.height = Math.ceil(width / scale);\n\t        }\n\t    }\n\t    else if (height) {\n\t        if (height < ret.height) {\n\t            ret.width  = Math.ceil(height * scale);\n\t            ret.height = height;\n\t        }\n\t    }\n\t\n\t    // 超过这个值base64无法生成，在IOS上\n\t    while (ret.width >= 3264 || ret.height >= 2448) {\n\t        ret.width *= 0.8;\n\t        ret.height *= 0.8;\n\t    }\n\t\n\t    return ret;\n\t};\n\t\n\t/**\n\t * 获取当前js文件所在路径，必须得在代码顶部执行此函数\n\t * @returns {string}\n\t */\n\tfunction getJsDir (src) {\n\t    var script = null;\n\t\n\t    if (src) {\n\t        script = [].filter.call(document.scripts, function (v) {\n\t            return v.src.indexOf(src) !== -1;\n\t        })[0];\n\t    } else {\n\t        script = document.scripts[document.scripts.length - 1];\n\t    }\n\t\n\t    if (!script) return null;\n\t\n\t    return script.src.substr(0, script.src.lastIndexOf('/'));\n\t}\n\t\n\t\n\t/**\n\t * 转换成formdata\n\t * @param dataURI\n\t * @returns {*}\n\t *\n\t * @source http://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata\n\t */\n\tfunction dataURItoBlob (dataURI) {\n\t    // convert base64/URLEncoded data component to raw binary data held in a string\n\t    var byteString;\n\t    if (dataURI.split(',')[0].indexOf('base64') >= 0)\n\t        byteString = atob(dataURI.split(',')[1]);\n\t    else\n\t        byteString = unescape(dataURI.split(',')[1]);\n\t\n\t    // separate out the mime component\n\t    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\t\n\t    // write the bytes of the string to a typed array\n\t    var ia = new Uint8Array(byteString.length);\n\t    for (var i = 0; i < byteString.length; i++) {\n\t        ia[i] = byteString.charCodeAt(i);\n\t    }\n\t\n\t    return new BlobFormDataShim.Blob([ia.buffer], {type: mimeString});\n\t}\n\t\n\twindow.lrz = function (file, opts) {\n\t    return new Lrz(file, opts);\n\t};\n\t\n\t// 版本号来自package.json，构建时自动填充\n\twindow.lrz.version = '4.9.36';\n\t\n\tmodule.exports = window.lrz;\n\t\n\t/**\n\t *\n\t * 　　　┏┓　　　┏┓\n\t * 　　┏┛┻━━━┛┻┓\n\t * 　　┃　　　　　　　┃\n\t * 　　┃　　　━　　　┃\n\t * 　　┃　┳┛　┗┳　┃\n\t * 　　┃　　　　　　　┃\n\t * 　　┃　　　┻　　　┃\n\t * 　　┃　　　　　　　┃\n\t * 　　┗━┓　　　┏━┛Code is far away from bug with the animal protecting\n\t * 　　　　┃　　　┃    神兽保佑,代码无bug\n\t * 　　　　┃　　　┃\n\t * 　　　　┃　　　┗━━━┓\n\t * 　　　　┃　　　　　 ┣┓\n\t * 　　　　┃　　　　 ┏┛\n\t * 　　　　┗┓┓┏━┳┓┏┛\n\t * 　　　　　┃┫┫　┃┫┫\n\t * 　　　　　┗┻┛　┗┻┛\n\t *\n\t */\n\t\n\t\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {(function (root) {\n\t\n\t    // Use polyfill for setImmediate for performance gains\n\t    var asap = (typeof setImmediate === 'function' && setImmediate) ||\n\t        function (fn) {\n\t            setTimeout(fn, 1);\n\t        };\n\t\n\t    // Polyfill for Function.prototype.bind\n\t    function bind (fn, thisArg) {\n\t        return function () {\n\t            fn.apply(thisArg, arguments);\n\t        }\n\t    }\n\t\n\t    var isArray = Array.isArray || function (value) {\n\t            return Object.prototype.toString.call(value) === \"[object Array]\"\n\t        };\n\t\n\t    function Promise (fn) {\n\t        if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n\t        if (typeof fn !== 'function') throw new TypeError('not a function');\n\t        this._state     = null;\n\t        this._value     = null;\n\t        this._deferreds = []\n\t\n\t        doResolve(fn, bind(resolve, this), bind(reject, this))\n\t    }\n\t\n\t    function handle (deferred) {\n\t        var me = this;\n\t        if (this._state === null) {\n\t            this._deferreds.push(deferred);\n\t            return\n\t        }\n\t        asap(function () {\n\t            var cb = me._state ? deferred.onFulfilled : deferred.onRejected\n\t            if (cb === null) {\n\t                (me._state ? deferred.resolve : deferred.reject)(me._value);\n\t                return;\n\t            }\n\t            var ret;\n\t            try {\n\t                ret = cb(me._value);\n\t            }\n\t            catch (e) {\n\t                deferred.reject(e);\n\t                return;\n\t            }\n\t            deferred.resolve(ret);\n\t        })\n\t    }\n\t\n\t    function resolve (newValue) {\n\t        try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t            if (newValue === this) throw new TypeError('A promise cannot be resolved with itself.');\n\t            if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n\t                var then = newValue.then;\n\t                if (typeof then === 'function') {\n\t                    doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n\t                    return;\n\t                }\n\t            }\n\t            this._state = true;\n\t            this._value = newValue;\n\t            finale.call(this);\n\t        } catch (e) {\n\t            reject.call(this, e);\n\t        }\n\t    }\n\t\n\t    function reject (newValue) {\n\t        this._state = false;\n\t        this._value = newValue;\n\t        finale.call(this);\n\t    }\n\t\n\t    function finale () {\n\t        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n\t            handle.call(this, this._deferreds[i]);\n\t        }\n\t        this._deferreds = null;\n\t    }\n\t\n\t    function Handler (onFulfilled, onRejected, resolve, reject) {\n\t        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\t        this.onRejected  = typeof onRejected === 'function' ? onRejected : null;\n\t        this.resolve     = resolve;\n\t        this.reject      = reject;\n\t    }\n\t\n\t    /**\n\t     * Take a potentially misbehaving resolver function and make sure\n\t     * onFulfilled and onRejected are only called once.\n\t     *\n\t     * Makes no guarantees about asynchrony.\n\t     */\n\t    function doResolve (fn, onFulfilled, onRejected) {\n\t        var done = false;\n\t        try {\n\t            fn(function (value) {\n\t                if (done) return;\n\t                done = true;\n\t                onFulfilled(value);\n\t            }, function (reason) {\n\t                if (done) return;\n\t                done = true;\n\t                onRejected(reason);\n\t            })\n\t        } catch (ex) {\n\t            if (done) return;\n\t            done = true;\n\t            onRejected(ex);\n\t        }\n\t    }\n\t\n\t    Promise.prototype['catch'] = function (onRejected) {\n\t        return this.then(null, onRejected);\n\t    };\n\t\n\t    Promise.prototype.then = function (onFulfilled, onRejected) {\n\t        var me = this;\n\t        return new Promise(function (resolve, reject) {\n\t            handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n\t        })\n\t    };\n\t\n\t    Promise.all = function () {\n\t        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n\t\n\t        return new Promise(function (resolve, reject) {\n\t            if (args.length === 0) return resolve([]);\n\t            var remaining = args.length;\n\t\n\t            function res (i, val) {\n\t                try {\n\t                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n\t                        var then = val.then;\n\t                        if (typeof then === 'function') {\n\t                            then.call(val, function (val) {\n\t                                res(i, val)\n\t                            }, reject);\n\t                            return;\n\t                        }\n\t                    }\n\t                    args[i] = val;\n\t                    if (--remaining === 0) {\n\t                        resolve(args);\n\t                    }\n\t                } catch (ex) {\n\t                    reject(ex);\n\t                }\n\t            }\n\t\n\t            for (var i = 0; i < args.length; i++) {\n\t                res(i, args[i]);\n\t            }\n\t        });\n\t    };\n\t\n\t    Promise.resolve = function (value) {\n\t        if (value && typeof value === 'object' && value.constructor === Promise) {\n\t            return value;\n\t        }\n\t\n\t        return new Promise(function (resolve) {\n\t            resolve(value);\n\t        });\n\t    };\n\t\n\t    Promise.reject = function (value) {\n\t        return new Promise(function (resolve, reject) {\n\t            reject(value);\n\t        });\n\t    };\n\t\n\t    Promise.race = function (values) {\n\t        return new Promise(function (resolve, reject) {\n\t            for (var i = 0, len = values.length; i < len; i++) {\n\t                values[i].then(resolve, reject);\n\t            }\n\t        });\n\t    };\n\t\n\t    /**\n\t     * Set the immediate function to execute callbacks\n\t     * @param fn {function} Function to execute\n\t     * @private\n\t     */\n\t    Promise._setImmediateFn = function _setImmediateFn (fn) {\n\t        asap = fn;\n\t    };\n\t\n\t\n\t    Promise.prototype.always = function (callback) {\n\t        var constructor = this.constructor;\n\t\n\t        return this.then(function (value) {\n\t            return constructor.resolve(callback()).then(function () {\n\t                return value;\n\t            });\n\t        }, function (reason) {\n\t            return constructor.resolve(callback()).then(function () {\n\t                throw reason;\n\t            });\n\t        });\n\t    };\n\t\n\t    if (typeof module !== 'undefined' && module.exports) {\n\t        module.exports = Promise;\n\t    } else if (!root.Promise) {\n\t        root.Promise = Promise;\n\t    }\n\t\n\t})(this);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2).setImmediate))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {var nextTick = __webpack_require__(3).nextTick;\n\tvar apply = Function.prototype.apply;\n\tvar slice = Array.prototype.slice;\n\tvar immediateIds = {};\n\tvar nextImmediateId = 0;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) { timeout.close(); };\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(window, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// That's not how node.js implements it but the exposed api is the same.\n\texports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n\t  var id = nextImmediateId++;\n\t  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\t\n\t  immediateIds[id] = true;\n\t\n\t  nextTick(function onNextTick() {\n\t    if (immediateIds[id]) {\n\t      // fn.call() is faster so we optimize for the common use-case\n\t      // @see http://jsperf.com/call-apply-segu\n\t      if (args) {\n\t        fn.apply(null, args);\n\t      } else {\n\t        fn.call(null);\n\t      }\n\t      // Prevent ids from leaking\n\t      exports.clearImmediate(id);\n\t    }\n\t  });\n\t\n\t  return id;\n\t};\n\t\n\texports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n\t  delete immediateIds[id];\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2).setImmediate, __webpack_require__(2).clearImmediate))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\t(function () {\n\t    try {\n\t        cachedSetTimeout = setTimeout;\n\t    } catch (e) {\n\t        cachedSetTimeout = function () {\n\t            throw new Error('setTimeout is not defined');\n\t        }\n\t    }\n\t    try {\n\t        cachedClearTimeout = clearTimeout;\n\t    } catch (e) {\n\t        cachedClearTimeout = function () {\n\t            throw new Error('clearTimeout is not defined');\n\t        }\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t//@source https://xts.so/demo/compress/index.html\n\t\n\t// 早期版本的浏览器需要用BlobBuilder来构造Blob，创建一个通用构造器来兼容早期版本\n\tvar BlobConstructor = ((function () {\n\t    try {\n\t        new Blob();\n\t        return true;\n\t    } catch (e) {\n\t        return false;\n\t    }\n\t})()) ? window.Blob : function (parts, opts) {\n\t    var bb = new (\n\t        window.BlobBuilder\n\t        || window.WebKitBlobBuilder\n\t        || window.MSBlobBuilder\n\t        || window.MozBlobBuilder\n\t    );\n\t    parts.forEach(function (p) {\n\t        bb.append(p);\n\t    });\n\t\n\t    return bb.getBlob(opts ? opts.type : undefined);\n\t};\n\t\n\t// Android上的AppleWebKit 534以前的内核存在一个Bug，\n\t// 导致FormData加入一个Blob对象后，上传的文件是0字节\n\tfunction hasFormDataBug () {\n\t    var bCheck = ~navigator.userAgent.indexOf('Android')\n\t        && ~navigator.vendor.indexOf('Google')\n\t        && !~navigator.userAgent.indexOf('Chrome');\n\t\n\t    // QQ X5浏览器也有这个BUG\n\t    return bCheck && navigator.userAgent.match(/AppleWebKit\\/(\\d+)/).pop() <= 534 || /MQQBrowser/g.test(navigator.userAgent);\n\t}\n\tvar FormDataShim=(function(){\n\t    var formDataShimNums = 0;\n\t    return function FormDataShim () {\n\t        var\n\t        // Store a reference to this\n\t        o        = this,\n\t    \n\t        // Data to be sent\n\t        parts = [],\n\t    \n\t        // Boundary parameter for separating the multipart values\n\t        boundary = Array(21).join('-') + (+new Date() * (1e16 * Math.random())).toString(36),\n\t    \n\t        // Store the current XHR send method so we can safely override it\n\t        oldSend  = XMLHttpRequest.prototype.send;\n\t        this.getParts = function () {\n\t            return parts.toString();\n\t        };\n\t        this.append   = function (name, value, filename) {\n\t            parts.push('--' + boundary + '\\r\\nContent-Disposition: form-data; name=\"' + name + '\"');\n\t    \n\t            if (value instanceof Blob) {\n\t                parts.push('; filename=\"' + (filename || 'blob') + '\"\\r\\nContent-Type: ' + value.type + '\\r\\n\\r\\n');\n\t                parts.push(value);\n\t            }\n\t            else {\n\t                parts.push('\\r\\n\\r\\n' + value);\n\t            }\n\t            parts.push('\\r\\n');\n\t        };\n\t    \n\t        formDataShimNums++;\n\t        XMLHttpRequest.prototype.send = function (val) {\n\t            var fr,\n\t                data,\n\t                oXHR = this;\n\t    \n\t            if (val === o) {\n\t                // Append the final boundary string\n\t                parts.push('--' + boundary + '--\\r\\n');\n\t                // Create the blob\n\t                data = new BlobConstructor(parts);\n\t    \n\t                // Set up and read the blob into an array to be sent\n\t                fr         = new FileReader();\n\t                fr.onload  = function () {\n\t                    oldSend.call(oXHR, fr.result);\n\t                };\n\t                fr.onerror = function (err) {\n\t                    throw err;\n\t                };\n\t                fr.readAsArrayBuffer(data);\n\t    \n\t                // Set the multipart content type and boudary\n\t                this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n\t                formDataShimNums--;\n\t                if(formDataShimNums == 0){\n\t                    XMLHttpRequest.prototype.send = oldSend;\n\t                }\n\t            }\n\t            else {\n\t                oldSend.call(this, val);\n\t            }\n\t        };\n\t    };\n\t})();\n\t\n\t\n\tmodule.exports = {\n\t    Blob    : BlobConstructor,\n\t    FormData: hasFormDataBug() ? FormDataShim : FormData\n\t};\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* exif */\n\t(function () {\n\t\n\t    var debug = false;\n\t\n\t    var root = this;\n\t\n\t    var EXIF = function (obj) {\n\t        if (obj instanceof EXIF) return obj;\n\t        if (!(this instanceof EXIF)) return new EXIF(obj);\n\t        this.EXIFwrapped = obj;\n\t    };\n\t\n\t    if (true) {\n\t        if (typeof module !== 'undefined' && module.exports) {\n\t            exports = module.exports = EXIF;\n\t        }\n\t        exports.EXIF = EXIF;\n\t    } else {\n\t        root.EXIF = EXIF;\n\t    }\n\t\n\t    var ExifTags = EXIF.Tags = {\n\t\n\t        // version tags\n\t        0x9000: \"ExifVersion\",             // EXIF version\n\t        0xA000: \"FlashpixVersion\",         // Flashpix format version\n\t\n\t        // colorspace tags\n\t        0xA001: \"ColorSpace\",              // Color space information tag\n\t\n\t        // image configuration\n\t        0xA002: \"PixelXDimension\",         // Valid width of meaningful image\n\t        0xA003: \"PixelYDimension\",         // Valid height of meaningful image\n\t        0x9101: \"ComponentsConfiguration\", // Information about channels\n\t        0x9102: \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\t\n\t        // user information\n\t        0x927C: \"MakerNote\",               // Any desired information written by the manufacturer\n\t        0x9286: \"UserComment\",             // Comments by user\n\t\n\t        // related file\n\t        0xA004: \"RelatedSoundFile\",        // Name of related sound file\n\t\n\t        // date and time\n\t        0x9003: \"DateTimeOriginal\",        // Date and time when the original image was generated\n\t        0x9004: \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n\t        0x9290: \"SubsecTime\",              // Fractions of seconds for DateTime\n\t        0x9291: \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n\t        0x9292: \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\t\n\t        // picture-taking conditions\n\t        0x829A: \"ExposureTime\",            // Exposure time (in seconds)\n\t        0x829D: \"FNumber\",                 // F number\n\t        0x8822: \"ExposureProgram\",         // Exposure program\n\t        0x8824: \"SpectralSensitivity\",     // Spectral sensitivity\n\t        0x8827: \"ISOSpeedRatings\",         // ISO speed rating\n\t        0x8828: \"OECF\",                    // Optoelectric conversion factor\n\t        0x9201: \"ShutterSpeedValue\",       // Shutter speed\n\t        0x9202: \"ApertureValue\",           // Lens aperture\n\t        0x9203: \"BrightnessValue\",         // Value of brightness\n\t        0x9204: \"ExposureBias\",            // Exposure bias\n\t        0x9205: \"MaxApertureValue\",        // Smallest F number of lens\n\t        0x9206: \"SubjectDistance\",         // Distance to subject in meters\n\t        0x9207: \"MeteringMode\",            // Metering mode\n\t        0x9208: \"LightSource\",             // Kind of light source\n\t        0x9209: \"Flash\",                   // Flash status\n\t        0x9214: \"SubjectArea\",             // Location and area of main subject\n\t        0x920A: \"FocalLength\",             // Focal length of the lens in mm\n\t        0xA20B: \"FlashEnergy\",             // Strobe energy in BCPS\n\t        0xA20C: \"SpatialFrequencyResponse\",    //\n\t        0xA20E: \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n\t        0xA20F: \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n\t        0xA210: \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n\t        0xA214: \"SubjectLocation\",         // Location of subject in image\n\t        0xA215: \"ExposureIndex\",           // Exposure index selected on camera\n\t        0xA217: \"SensingMethod\",           // Image sensor type\n\t        0xA300: \"FileSource\",              // Image source (3 == DSC)\n\t        0xA301: \"SceneType\",               // Scene type (1 == directly photographed)\n\t        0xA302: \"CFAPattern\",              // Color filter array geometric pattern\n\t        0xA401: \"CustomRendered\",          // Special processing\n\t        0xA402: \"ExposureMode\",            // Exposure mode\n\t        0xA403: \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n\t        0xA404: \"DigitalZoomRation\",       // Digital zoom ratio\n\t        0xA405: \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n\t        0xA406: \"SceneCaptureType\",        // Type of scene\n\t        0xA407: \"GainControl\",             // Degree of overall image gain adjustment\n\t        0xA408: \"Contrast\",                // Direction of contrast processing applied by camera\n\t        0xA409: \"Saturation\",              // Direction of saturation processing applied by camera\n\t        0xA40A: \"Sharpness\",               // Direction of sharpness processing applied by camera\n\t        0xA40B: \"DeviceSettingDescription\",    //\n\t        0xA40C: \"SubjectDistanceRange\",    // Distance to subject\n\t\n\t        // other tags\n\t        0xA005: \"InteroperabilityIFDPointer\",\n\t        0xA420: \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n\t    };\n\t\n\t    var TiffTags = EXIF.TiffTags = {\n\t        0x0100: \"ImageWidth\",\n\t        0x0101: \"ImageHeight\",\n\t        0x8769: \"ExifIFDPointer\",\n\t        0x8825: \"GPSInfoIFDPointer\",\n\t        0xA005: \"InteroperabilityIFDPointer\",\n\t        0x0102: \"BitsPerSample\",\n\t        0x0103: \"Compression\",\n\t        0x0106: \"PhotometricInterpretation\",\n\t        0x0112: \"Orientation\",\n\t        0x0115: \"SamplesPerPixel\",\n\t        0x011C: \"PlanarConfiguration\",\n\t        0x0212: \"YCbCrSubSampling\",\n\t        0x0213: \"YCbCrPositioning\",\n\t        0x011A: \"XResolution\",\n\t        0x011B: \"YResolution\",\n\t        0x0128: \"ResolutionUnit\",\n\t        0x0111: \"StripOffsets\",\n\t        0x0116: \"RowsPerStrip\",\n\t        0x0117: \"StripByteCounts\",\n\t        0x0201: \"JPEGInterchangeFormat\",\n\t        0x0202: \"JPEGInterchangeFormatLength\",\n\t        0x012D: \"TransferFunction\",\n\t        0x013E: \"WhitePoint\",\n\t        0x013F: \"PrimaryChromaticities\",\n\t        0x0211: \"YCbCrCoefficients\",\n\t        0x0214: \"ReferenceBlackWhite\",\n\t        0x0132: \"DateTime\",\n\t        0x010E: \"ImageDescription\",\n\t        0x010F: \"Make\",\n\t        0x0110: \"Model\",\n\t        0x0131: \"Software\",\n\t        0x013B: \"Artist\",\n\t        0x8298: \"Copyright\"\n\t    };\n\t\n\t    var GPSTags = EXIF.GPSTags = {\n\t        0x0000: \"GPSVersionID\",\n\t        0x0001: \"GPSLatitudeRef\",\n\t        0x0002: \"GPSLatitude\",\n\t        0x0003: \"GPSLongitudeRef\",\n\t        0x0004: \"GPSLongitude\",\n\t        0x0005: \"GPSAltitudeRef\",\n\t        0x0006: \"GPSAltitude\",\n\t        0x0007: \"GPSTimeStamp\",\n\t        0x0008: \"GPSSatellites\",\n\t        0x0009: \"GPSStatus\",\n\t        0x000A: \"GPSMeasureMode\",\n\t        0x000B: \"GPSDOP\",\n\t        0x000C: \"GPSSpeedRef\",\n\t        0x000D: \"GPSSpeed\",\n\t        0x000E: \"GPSTrackRef\",\n\t        0x000F: \"GPSTrack\",\n\t        0x0010: \"GPSImgDirectionRef\",\n\t        0x0011: \"GPSImgDirection\",\n\t        0x0012: \"GPSMapDatum\",\n\t        0x0013: \"GPSDestLatitudeRef\",\n\t        0x0014: \"GPSDestLatitude\",\n\t        0x0015: \"GPSDestLongitudeRef\",\n\t        0x0016: \"GPSDestLongitude\",\n\t        0x0017: \"GPSDestBearingRef\",\n\t        0x0018: \"GPSDestBearing\",\n\t        0x0019: \"GPSDestDistanceRef\",\n\t        0x001A: \"GPSDestDistance\",\n\t        0x001B: \"GPSProcessingMethod\",\n\t        0x001C: \"GPSAreaInformation\",\n\t        0x001D: \"GPSDateStamp\",\n\t        0x001E: \"GPSDifferential\"\n\t    };\n\t\n\t    var StringValues = EXIF.StringValues = {\n\t        ExposureProgram     : {\n\t            0: \"Not defined\",\n\t            1: \"Manual\",\n\t            2: \"Normal program\",\n\t            3: \"Aperture priority\",\n\t            4: \"Shutter priority\",\n\t            5: \"Creative program\",\n\t            6: \"Action program\",\n\t            7: \"Portrait mode\",\n\t            8: \"Landscape mode\"\n\t        },\n\t        MeteringMode        : {\n\t            0  : \"Unknown\",\n\t            1  : \"Average\",\n\t            2  : \"CenterWeightedAverage\",\n\t            3  : \"Spot\",\n\t            4  : \"MultiSpot\",\n\t            5  : \"Pattern\",\n\t            6  : \"Partial\",\n\t            255: \"Other\"\n\t        },\n\t        LightSource         : {\n\t            0  : \"Unknown\",\n\t            1  : \"Daylight\",\n\t            2  : \"Fluorescent\",\n\t            3  : \"Tungsten (incandescent light)\",\n\t            4  : \"Flash\",\n\t            9  : \"Fine weather\",\n\t            10 : \"Cloudy weather\",\n\t            11 : \"Shade\",\n\t            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n\t            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n\t            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n\t            15 : \"White fluorescent (WW 3200 - 3700K)\",\n\t            17 : \"Standard light A\",\n\t            18 : \"Standard light B\",\n\t            19 : \"Standard light C\",\n\t            20 : \"D55\",\n\t            21 : \"D65\",\n\t            22 : \"D75\",\n\t            23 : \"D50\",\n\t            24 : \"ISO studio tungsten\",\n\t            255: \"Other\"\n\t        },\n\t        Flash               : {\n\t            0x0000: \"Flash did not fire\",\n\t            0x0001: \"Flash fired\",\n\t            0x0005: \"Strobe return light not detected\",\n\t            0x0007: \"Strobe return light detected\",\n\t            0x0009: \"Flash fired, compulsory flash mode\",\n\t            0x000D: \"Flash fired, compulsory flash mode, return light not detected\",\n\t            0x000F: \"Flash fired, compulsory flash mode, return light detected\",\n\t            0x0010: \"Flash did not fire, compulsory flash mode\",\n\t            0x0018: \"Flash did not fire, auto mode\",\n\t            0x0019: \"Flash fired, auto mode\",\n\t            0x001D: \"Flash fired, auto mode, return light not detected\",\n\t            0x001F: \"Flash fired, auto mode, return light detected\",\n\t            0x0020: \"No flash function\",\n\t            0x0041: \"Flash fired, red-eye reduction mode\",\n\t            0x0045: \"Flash fired, red-eye reduction mode, return light not detected\",\n\t            0x0047: \"Flash fired, red-eye reduction mode, return light detected\",\n\t            0x0049: \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n\t            0x004D: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n\t            0x004F: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n\t            0x0059: \"Flash fired, auto mode, red-eye reduction mode\",\n\t            0x005D: \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n\t            0x005F: \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n\t        },\n\t        SensingMethod       : {\n\t            1: \"Not defined\",\n\t            2: \"One-chip color area sensor\",\n\t            3: \"Two-chip color area sensor\",\n\t            4: \"Three-chip color area sensor\",\n\t            5: \"Color sequential area sensor\",\n\t            7: \"Trilinear sensor\",\n\t            8: \"Color sequential linear sensor\"\n\t        },\n\t        SceneCaptureType    : {\n\t            0: \"Standard\",\n\t            1: \"Landscape\",\n\t            2: \"Portrait\",\n\t            3: \"Night scene\"\n\t        },\n\t        SceneType           : {\n\t            1: \"Directly photographed\"\n\t        },\n\t        CustomRendered      : {\n\t            0: \"Normal process\",\n\t            1: \"Custom process\"\n\t        },\n\t        WhiteBalance        : {\n\t            0: \"Auto white balance\",\n\t            1: \"Manual white balance\"\n\t        },\n\t        GainControl         : {\n\t            0: \"None\",\n\t            1: \"Low gain up\",\n\t            2: \"High gain up\",\n\t            3: \"Low gain down\",\n\t            4: \"High gain down\"\n\t        },\n\t        Contrast            : {\n\t            0: \"Normal\",\n\t            1: \"Soft\",\n\t            2: \"Hard\"\n\t        },\n\t        Saturation          : {\n\t            0: \"Normal\",\n\t            1: \"Low saturation\",\n\t            2: \"High saturation\"\n\t        },\n\t        Sharpness           : {\n\t            0: \"Normal\",\n\t            1: \"Soft\",\n\t            2: \"Hard\"\n\t        },\n\t        SubjectDistanceRange: {\n\t            0: \"Unknown\",\n\t            1: \"Macro\",\n\t            2: \"Close view\",\n\t            3: \"Distant view\"\n\t        },\n\t        FileSource          : {\n\t            3: \"DSC\"\n\t        },\n\t\n\t        Components: {\n\t            0: \"\",\n\t            1: \"Y\",\n\t            2: \"Cb\",\n\t            3: \"Cr\",\n\t            4: \"R\",\n\t            5: \"G\",\n\t            6: \"B\"\n\t        }\n\t    };\n\t\n\t    function addEvent (element, event, handler) {\n\t        if (element.addEventListener) {\n\t            element.addEventListener(event, handler, false);\n\t        } else if (element.attachEvent) {\n\t            element.attachEvent(\"on\" + event, handler);\n\t        }\n\t    }\n\t\n\t    function imageHasData (img) {\n\t        return !!(img.exifdata);\n\t    }\n\t\n\t\n\t    function base64ToArrayBuffer (base64, contentType) {\n\t        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n\t        base64     = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n\t        var binary = atob(base64);\n\t        var len    = binary.length;\n\t        var buffer = new ArrayBuffer(len);\n\t        var view   = new Uint8Array(buffer);\n\t        for (var i = 0; i < len; i++) {\n\t            view[i] = binary.charCodeAt(i);\n\t        }\n\t        return buffer;\n\t    }\n\t\n\t    function objectURLToBlob (url, callback) {\n\t        var http          = new XMLHttpRequest();\n\t        http.open(\"GET\", url, true);\n\t        http.responseType = \"blob\";\n\t        http.onload       = function (e) {\n\t            if (this.status == 200 || this.status === 0) {\n\t                callback(this.response);\n\t            }\n\t        };\n\t        http.send();\n\t    }\n\t\n\t    function getImageData (img, callback) {\n\t        function handleBinaryFile (binFile) {\n\t            var data     = findEXIFinJPEG(binFile);\n\t            var iptcdata = findIPTCinJPEG(binFile);\n\t            img.exifdata = data || {};\n\t            img.iptcdata = iptcdata || {};\n\t            if (callback) {\n\t                callback.call(img);\n\t            }\n\t        }\n\t\n\t        if (img.src) {\n\t            if (/^data\\:/i.test(img.src)) { // Data URI\n\t                var arrayBuffer = base64ToArrayBuffer(img.src);\n\t                handleBinaryFile(arrayBuffer);\n\t\n\t            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n\t                var fileReader    = new FileReader();\n\t                fileReader.onload = function (e) {\n\t                    handleBinaryFile(e.target.result);\n\t                };\n\t                objectURLToBlob(img.src, function (blob) {\n\t                    fileReader.readAsArrayBuffer(blob);\n\t                });\n\t            } else {\n\t                var http          = new XMLHttpRequest();\n\t                http.onload       = function () {\n\t                    if (this.status == 200 || this.status === 0) {\n\t                        handleBinaryFile(http.response);\n\t                    } else {\n\t                        callback(new Error(\"Could not load image\"));\n\t                    }\n\t                    http = null;\n\t                };\n\t                http.open(\"GET\", img.src, true);\n\t                http.responseType = \"arraybuffer\";\n\t                http.send(null);\n\t            }\n\t        } else if (window.FileReader && (img instanceof window.Blob || img instanceof window.File)) {\n\t            var fileReader    = new FileReader();\n\t            fileReader.onload = function (e) {\n\t                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n\t                handleBinaryFile(e.target.result);\n\t            };\n\t\n\t            fileReader.readAsArrayBuffer(img);\n\t        }\n\t    }\n\t\n\t    function findEXIFinJPEG (file) {\n\t        var dataView = new DataView(file);\n\t\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n\t            if (debug) console.log(\"Not a valid JPEG\");\n\t            return false; // not a valid jpeg\n\t        }\n\t\n\t        var offset = 2,\n\t            length = file.byteLength,\n\t            marker;\n\t\n\t        while (offset < length) {\n\t            if (dataView.getUint8(offset) != 0xFF) {\n\t                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n\t                return false; // not a valid marker, something is wrong\n\t            }\n\t\n\t            marker = dataView.getUint8(offset + 1);\n\t            if (debug) console.log(marker);\n\t\n\t            // we could implement handling for other markers here,\n\t            // but we're only looking for 0xFFE1 for EXIF data\n\t\n\t            if (marker == 225) {\n\t                if (debug) console.log(\"Found 0xFFE1 marker\");\n\t\n\t                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\t\n\t                // offset += 2 + file.getShortAt(offset+2, true);\n\t\n\t            } else {\n\t                offset += 2 + dataView.getUint16(offset + 2);\n\t            }\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function findIPTCinJPEG (file) {\n\t        var dataView = new DataView(file);\n\t\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n\t            if (debug) console.log(\"Not a valid JPEG\");\n\t            return false; // not a valid jpeg\n\t        }\n\t\n\t        var offset = 2,\n\t            length = file.byteLength;\n\t\n\t\n\t        var isFieldSegmentStart = function (dataView, offset) {\n\t            return (\n\t                dataView.getUint8(offset) === 0x38 &&\n\t                dataView.getUint8(offset + 1) === 0x42 &&\n\t                dataView.getUint8(offset + 2) === 0x49 &&\n\t                dataView.getUint8(offset + 3) === 0x4D &&\n\t                dataView.getUint8(offset + 4) === 0x04 &&\n\t                dataView.getUint8(offset + 5) === 0x04\n\t            );\n\t        };\n\t\n\t        while (offset < length) {\n\t\n\t            if (isFieldSegmentStart(dataView, offset)) {\n\t\n\t                // Get the length of the name header (which is padded to an even number of bytes)\n\t                var nameHeaderLength = dataView.getUint8(offset + 7);\n\t                if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n\t                // Check for pre photoshop 6 format\n\t                if (nameHeaderLength === 0) {\n\t                    // Always 4\n\t                    nameHeaderLength = 4;\n\t                }\n\t\n\t                var startOffset   = offset + 8 + nameHeaderLength;\n\t                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\t\n\t                return readIPTCData(file, startOffset, sectionLength);\n\t\n\t                break;\n\t\n\t            }\n\t\n\t\n\t            // Not the marker, continue searching\n\t            offset++;\n\t\n\t        }\n\t\n\t    }\n\t\n\t    var IptcFieldMap = {\n\t        0x78: 'caption',\n\t        0x6E: 'credit',\n\t        0x19: 'keywords',\n\t        0x37: 'dateCreated',\n\t        0x50: 'byline',\n\t        0x55: 'bylineTitle',\n\t        0x7A: 'captionWriter',\n\t        0x69: 'headline',\n\t        0x74: 'copyright',\n\t        0x0F: 'category'\n\t    };\n\t\n\t    function readIPTCData (file, startOffset, sectionLength) {\n\t        var dataView        = new DataView(file);\n\t        var data            = {};\n\t        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n\t        var segmentStartPos = startOffset;\n\t        while (segmentStartPos < startOffset + sectionLength) {\n\t            if (dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos + 1) === 0x02) {\n\t                segmentType = dataView.getUint8(segmentStartPos + 2);\n\t                if (segmentType in IptcFieldMap) {\n\t                    dataSize    = dataView.getInt16(segmentStartPos + 3);\n\t                    segmentSize = dataSize + 5;\n\t                    fieldName   = IptcFieldMap[segmentType];\n\t                    fieldValue  = getStringFromDB(dataView, segmentStartPos + 5, dataSize);\n\t                    // Check if we already stored a value with this name\n\t                    if (data.hasOwnProperty(fieldName)) {\n\t                        // Value already stored with this name, create multivalue field\n\t                        if (data[fieldName] instanceof Array) {\n\t                            data[fieldName].push(fieldValue);\n\t                        }\n\t                        else {\n\t                            data[fieldName] = [data[fieldName], fieldValue];\n\t                        }\n\t                    }\n\t                    else {\n\t                        data[fieldName] = fieldValue;\n\t                    }\n\t                }\n\t\n\t            }\n\t            segmentStartPos++;\n\t        }\n\t        return data;\n\t    }\n\t\n\t\n\t    function readTags (file, tiffStart, dirStart, strings, bigEnd) {\n\t        var entries = file.getUint16(dirStart, !bigEnd),\n\t            tags    = {},\n\t            entryOffset, tag,\n\t            i;\n\t\n\t        for (i = 0; i < entries; i++) {\n\t            entryOffset = dirStart + i * 12 + 2;\n\t            tag         = strings[file.getUint16(entryOffset, !bigEnd)];\n\t            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n\t            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n\t        }\n\t        return tags;\n\t    }\n\t\n\t\n\t    function readTagValue (file, entryOffset, tiffStart, dirStart, bigEnd) {\n\t        var type        = file.getUint16(entryOffset + 2, !bigEnd),\n\t            numValues   = file.getUint32(entryOffset + 4, !bigEnd),\n\t            valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\n\t            offset,\n\t            vals, val, n,\n\t            numerator, denominator;\n\t\n\t        switch (type) {\n\t            case 1: // byte, 8-bit unsigned int\n\t            case 7: // undefined, 8-bit byte, value depending on field\n\t                if (numValues == 1) {\n\t                    return file.getUint8(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n\t                    vals   = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        vals[n] = file.getUint8(offset + n);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 2: // ascii, 8-bit byte\n\t                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n\t                return getStringFromDB(file, offset, numValues - 1);\n\t\n\t            case 3: // short, 16 bit int\n\t                if (numValues == 1) {\n\t                    return file.getUint16(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n\t                    vals   = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 4: // long, 32 bit int\n\t                if (numValues == 1) {\n\t                    return file.getUint32(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 5:    // rational = two long values, first is numerator, second is denominator\n\t                if (numValues == 1) {\n\t                    numerator       = file.getUint32(valueOffset, !bigEnd);\n\t                    denominator     = file.getUint32(valueOffset + 4, !bigEnd);\n\t                    val             = new Number(numerator / denominator);\n\t                    val.numerator   = numerator;\n\t                    val.denominator = denominator;\n\t                    return val;\n\t                } else {\n\t                    vals = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        numerator           = file.getUint32(valueOffset + 8 * n, !bigEnd);\n\t                        denominator         = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\n\t                        vals[n]             = new Number(numerator / denominator);\n\t                        vals[n].numerator   = numerator;\n\t                        vals[n].denominator = denominator;\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 9: // slong, 32 bit signed int\n\t                if (numValues == 1) {\n\t                    return file.getInt32(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 10: // signed rational, two slongs, first is numerator, second is denominator\n\t                if (numValues == 1) {\n\t                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset + 4, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n = 0; n < numValues; n++) {\n\t                        vals[n] = file.getInt32(valueOffset + 8 * n, !bigEnd) / file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t        }\n\t    }\n\t\n\t    function getStringFromDB (buffer, start, length) {\n\t        var outstr = \"\", n;\n\t        for (n = start; n < start + length; n++) {\n\t            outstr += String.fromCharCode(buffer.getUint8(n));\n\t        }\n\t        return outstr;\n\t    }\n\t\n\t    function readEXIFData (file, start) {\n\t        if (getStringFromDB(file, start, 4) != \"Exif\") {\n\t            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n\t            return false;\n\t        }\n\t\n\t        var bigEnd,\n\t            tags, tag,\n\t            exifData, gpsData,\n\t            tiffOffset = start + 6;\n\t\n\t        // test for TIFF validity and endianness\n\t        if (file.getUint16(tiffOffset) == 0x4949) {\n\t            bigEnd = false;\n\t        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n\t            bigEnd = true;\n\t        } else {\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n\t            return false;\n\t        }\n\t\n\t        if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002A) {\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n\t            return false;\n\t        }\n\t\n\t        var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\n\t\n\t        if (firstIFDOffset < 0x00000008) {\n\t            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset + 4, !bigEnd));\n\t            return false;\n\t        }\n\t\n\t        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\t\n\t        if (tags.ExifIFDPointer) {\n\t            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n\t            for (tag in exifData) {\n\t                switch (tag) {\n\t                    case \"LightSource\" :\n\t                    case \"Flash\" :\n\t                    case \"MeteringMode\" :\n\t                    case \"ExposureProgram\" :\n\t                    case \"SensingMethod\" :\n\t                    case \"SceneCaptureType\" :\n\t                    case \"SceneType\" :\n\t                    case \"CustomRendered\" :\n\t                    case \"WhiteBalance\" :\n\t                    case \"GainControl\" :\n\t                    case \"Contrast\" :\n\t                    case \"Saturation\" :\n\t                    case \"Sharpness\" :\n\t                    case \"SubjectDistanceRange\" :\n\t                    case \"FileSource\" :\n\t                        exifData[tag] = StringValues[tag][exifData[tag]];\n\t                        break;\n\t\n\t                    case \"ExifVersion\" :\n\t                    case \"FlashpixVersion\" :\n\t                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n\t                        break;\n\t\n\t                    case \"ComponentsConfiguration\" :\n\t                        exifData[tag] =\n\t                            StringValues.Components[exifData[tag][0]] +\n\t                            StringValues.Components[exifData[tag][1]] +\n\t                            StringValues.Components[exifData[tag][2]] +\n\t                            StringValues.Components[exifData[tag][3]];\n\t                        break;\n\t                }\n\t                tags[tag] = exifData[tag];\n\t            }\n\t        }\n\t\n\t        if (tags.GPSInfoIFDPointer) {\n\t            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n\t            for (tag in gpsData) {\n\t                switch (tag) {\n\t                    case \"GPSVersionID\" :\n\t                        gpsData[tag] = gpsData[tag][0] +\n\t                            \".\" + gpsData[tag][1] +\n\t                            \".\" + gpsData[tag][2] +\n\t                            \".\" + gpsData[tag][3];\n\t                        break;\n\t                }\n\t                tags[tag] = gpsData[tag];\n\t            }\n\t        }\n\t\n\t        return tags;\n\t    }\n\t\n\t    EXIF.getData = function (img, callback) {\n\t        if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\n\t\n\t        if (!imageHasData(img)) {\n\t            getImageData(img, callback);\n\t        } else {\n\t            if (callback) {\n\t                callback.call(img);\n\t            }\n\t        }\n\t        return true;\n\t    }\n\t\n\t    EXIF.getTag = function (img, tag) {\n\t        if (!imageHasData(img)) return;\n\t        return img.exifdata[tag];\n\t    }\n\t\n\t    EXIF.getAllTags = function (img) {\n\t        if (!imageHasData(img)) return {};\n\t        var a,\n\t            data = img.exifdata,\n\t            tags = {};\n\t        for (a in data) {\n\t            if (data.hasOwnProperty(a)) {\n\t                tags[a] = data[a];\n\t            }\n\t        }\n\t        return tags;\n\t    }\n\t\n\t    EXIF.pretty = function (img) {\n\t        if (!imageHasData(img)) return \"\";\n\t        var a,\n\t            data      = img.exifdata,\n\t            strPretty = \"\";\n\t        for (a in data) {\n\t            if (data.hasOwnProperty(a)) {\n\t                if (typeof data[a] == \"object\") {\n\t                    if (data[a] instanceof Number) {\n\t                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n\t                    } else {\n\t                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n\t                    }\n\t                } else {\n\t                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n\t                }\n\t            }\n\t        }\n\t        return strPretty;\n\t    }\n\t\n\t    EXIF.readFromBinaryFile = function (file) {\n\t        return findEXIFinJPEG(file);\n\t    }\n\t\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t            return EXIF;\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t}.call(this));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** lrz.bundle.js\n **/"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId])\n \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n \t\twhile(callbacks.length)\n \t\t\tcallbacks.shift().call(null, __webpack_require__);\n\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// \"0\" means \"already loaded\"\n \t// Array means \"loading\", array contains callbacks\n \tvar installedChunks = {\n \t\t0:0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] === 0)\n \t\t\treturn callback.call(null, __webpack_require__);\n\n \t\t// an array means \"currently loading\".\n \t\tif(installedChunks[chunkId] !== undefined) {\n \t\t\tinstalledChunks[chunkId].push(callback);\n \t\t} else {\n \t\t\t// start chunk loading\n \t\t\tinstalledChunks[chunkId] = [callback];\n \t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\tvar script = document.createElement('script');\n \t\t\tscript.type = 'text/javascript';\n \t\t\tscript.charset = 'utf-8';\n \t\t\tscript.async = true;\n\n \t\t\tscript.src = __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".chunk.js\";\n \t\t\thead.appendChild(script);\n \t\t}\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap db29311f10992f0b2042\n **/","// 保证按需加载的文件路径正确\n__webpack_public_path__ = getJsDir('lrz') + '/';\nwindow.URL              = window.URL || window.webkitURL;\n\nvar Promise          = require('Promise'),\n    BlobFormDataShim = require('Blob.FormData.shim'),\n    exif             = require('exif');\n\n\nvar UA = (function (userAgent) {\n    var ISOldIOS     = /OS (\\d)_.* like Mac OS X/g.exec(userAgent),\n        isOldAndroid = /Android (\\d.*?);/g.exec(userAgent) || /Android\\/(\\d.*?) /g.exec(userAgent);\n\n    // 判断设备是否是IOS7以下\n    // 判断设备是否是android4.5以下\n    // 判断是否iOS\n    // 判断是否android\n    // 判断是否QQ浏览器\n    return {\n        oldIOS    : ISOldIOS ? +ISOldIOS.pop() < 8 : false,\n        oldAndroid: isOldAndroid ? +isOldAndroid.pop().substr(0, 3) < 4.5 : false,\n        iOS       : /\\(i[^;]+;( U;)? CPU.+Mac OS X/.test(userAgent),\n        android   : /Android/g.test(userAgent),\n        mQQBrowser: /MQQBrowser/g.test(userAgent)\n    }\n})(navigator.userAgent);\n\n\nfunction Lrz (file, opts) {\n    var that = this;\n\n    if (!file) throw new Error('没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7');\n\n    opts = opts || {};\n\n    that.defaults = {\n        width    : null,\n        height   : null,\n        minWidth : null,\n        minHeight: null,\n        customSize: null,\n        fieldName: 'file',\n        quality  : 0.7,\n        wxLocalFile: false\n    };\n\n    that.file = file;\n\n    for (var p in opts) {\n        if (!opts.hasOwnProperty(p)) continue;\n        that.defaults[p] = opts[p];\n    }\n\n    return this.init();\n}\n\nLrz.prototype.init = function () {\n    var that         = this,\n        file         = that.file,\n        fileIsString = typeof file === 'string',\n        fileIsBase64 = /^data:/.test(file),\n        img          = new Image(),\n        canvas       = document.createElement('canvas'),\n        blob         = fileIsString ? file : URL.createObjectURL(file);\n\n    that.img    = img;\n    that.blob   = blob;\n    that.canvas = canvas;\n\n    if (fileIsString) {\n        that.fileName = fileIsBase64 ? 'base64.jpg' : (file.split('/').pop());\n    } else {\n        that.fileName = file.name;\n    }\n\n    if (!document.createElement('canvas').getContext) {\n        throw new Error('浏览器不支持canvas');\n    }\n\n    return new Promise(function (resolve, reject) {\n        img.onerror = function () {\n            throw new Error('加载图片文件失败');\n        };\n\n        img.onload = function () {\n            that._getBase64()\n                .then(function (base64) {\n                    if (base64.length < 10) reject('生成base64失败');\n\n                    return base64;\n                })\n                .then(function (base64) {\n                    var formData = null;\n\n                    // 压缩文件太大就采用源文件,且使用原生的FormData() @source #55\n                    if (typeof that.file === 'object' && base64.length > that.file.size) {\n                        formData = new FormData();\n                        file     = that.file;\n                    } else {\n                        formData = new BlobFormDataShim.FormData();\n                        file     = dataURItoBlob(base64);\n                    }\n\n                    formData.append(that.defaults.fieldName, file, (that.fileName.replace(/\\..+/g, '.jpg')));\n\n                    resolve({\n                        formData : formData,\n                        fileLen : +file.size,\n                        base64  : base64,\n                        base64Len: base64.length,\n                        origin   : that.file,\n                        file   : file\n                    });\n\n                    // 释放内存\n                    for (var p in that) {\n                        if (!that.hasOwnProperty(p)) continue;\n\n                        that[p] = null;\n                    }\n                    URL.revokeObjectURL(that.blob);\n                });\n        };\n\n        // 如果传入的是base64在移动端会报错\n        !fileIsBase64 && !that.wxLocalFile && (img.crossOrigin = \"*\");\n\n        img.src = blob;\n    });\n};\n\nLrz.prototype._getBase64 = function () {\n    var that   = this,\n        img    = that.img,\n        file   = that.file,\n        canvas = that.canvas;\n\n    return new Promise(function (resolve) {\n        try {\n            // 传入blob在android4.3以下有bug\n            exif.getData(typeof file === 'object' ? file : img, function () {\n                that.orientation = exif.getTag(this, \"Orientation\");\n\n                that.resize = that._getResize();\n                that.ctx    = canvas.getContext('2d');\n\n                canvas.width  = that.resize.width;\n                canvas.height = that.resize.height;\n\n                // 设置为白色背景，jpg是不支持透明的，所以会被默认为canvas默认的黑色背景。\n                that.ctx.fillStyle = '#fff';\n                that.ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                // 根据设备对应处理方式\n                if (UA.oldIOS) {\n                    that._createBase64ForOldIOS().then(resolve);\n                }\n                else {\n                    that._createBase64().then(resolve);\n                }\n            });\n        } catch (err) {\n            // 这样能解决低内存设备闪退的问题吗？\n            throw new Error(err);\n        }\n    });\n};\n\n\nLrz.prototype._createBase64ForOldIOS = function () {\n    var that        = this,\n        img         = that.img,\n        canvas      = that.canvas,\n        defaults    = that.defaults,\n        orientation = that.orientation;\n\n    return new Promise(function (resolve) {\n        require(['megapix-image'], function (MegaPixImage) {\n            var mpImg = new MegaPixImage(img);\n\n            if (\"5678\".indexOf(orientation) > -1) {\n                mpImg.render(canvas, {\n                    width      : canvas.height,\n                    height     : canvas.width,\n                    orientation: orientation\n                });\n            } else {\n                mpImg.render(canvas, {\n                    width      : canvas.width,\n                    height     : canvas.height,\n                    orientation: orientation\n                });\n            }\n\n            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\n        });\n    });\n};\n\nLrz.prototype._createBase64 = function () {\n    var that        = this,\n        resize      = that.resize,\n        img         = that.img,\n        canvas      = that.canvas,\n        ctx         = that.ctx,\n        defaults    = that.defaults,\n        orientation = that.orientation;\n\n    // 调整为正确方向\n    switch (orientation) {\n        case 3:\n            ctx.rotate(180 * Math.PI / 180);\n            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\n            break;\n        case 6:\n            ctx.rotate(90 * Math.PI / 180);\n            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\n            break;\n        case 8:\n            ctx.rotate(270 * Math.PI / 180);\n            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\n            break;\n\n        case 2:\n            ctx.translate(resize.width, 0);\n            ctx.scale(-1, 1);\n            ctx.drawImage(img, 0, 0, resize.width, resize.height);\n            break;\n        case 4:\n            ctx.translate(resize.width, 0);\n            ctx.scale(-1, 1);\n            ctx.rotate(180 * Math.PI / 180);\n            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\n            break;\n        case 5:\n            ctx.translate(resize.width, 0);\n            ctx.scale(-1, 1);\n            ctx.rotate(90 * Math.PI / 180);\n            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\n            break;\n        case 7:\n            ctx.translate(resize.width, 0);\n            ctx.scale(-1, 1);\n            ctx.rotate(270 * Math.PI / 180);\n            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\n            break;\n\n        default:\n            ctx.drawImage(img, 0, 0, resize.width, resize.height);\n    }\n\n    return new Promise(function (resolve) {\n        if (UA.oldAndroid || UA.mQQBrowser || !navigator.userAgent) {\n            require(['jpeg_encoder_basic'], function (JPEGEncoder) {\n                var encoder = new JPEGEncoder(),\n                    img     = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n                resolve(encoder.encode(img, defaults.quality * 100));\n            })\n        }\n        else {\n            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\n        }\n    });\n};\n\nLrz.prototype._getMaxSize = function (w, h, option) {\n    var ret = {width: w, height: h};\n    var width = option.width;\n    var height = option.height;\n    // 如果原图小于设定，采用原图\n    if (ret.width < width || ret.height < height) {\n        return ret;\n    }\n\n    var scale = ret.width / ret.height;\n\n    if (width && height) {\n        if (scale >= width / height) {\n            if (ret.width > width) {\n                ret.width  = width;\n                ret.height = Math.ceil(width / scale);\n            }\n        } else {\n            if (ret.height > height) {\n                ret.height = height;\n                ret.width  = Math.ceil(height * scale);\n            }\n        }\n    }\n    else if (width) {\n        if (width < ret.width) {\n            ret.width  = width;\n            ret.height = Math.ceil(width / scale);\n        }\n    }\n    else if (height) {\n        if (height < ret.height) {\n            ret.width  = Math.ceil(height * scale);\n            ret.height = height;\n        }\n    }\n    // 超过这个值base64无法生成，在IOS上\n    while (ret.width >= 3264 || ret.height >= 2448) {\n        ret.width *= 0.8;\n        ret.height *= 0.8;\n    }\n    return ret;\n};\n\nLrz.prototype._getMinSize = function (w, h, option) {\n    var ret = {width: w, height: h};\n    var width = option.minWidth;\n    var height = option.minHeight;\n    // 如果原图小于设定，采用原图\n    var scale = ret.width / ret.height;\n\n    if (width && height) {\n        if (scale >= width / height) {\n            ret.height  = height;\n            ret.width = Math.ceil(ret.height * scale);\n        } else {\n            ret.width = width;\n            ret.height = Math.ceil(ret.width / scale);\n        }\n    }\n    else if (width) {\n        ret.width = width;\n        ret.height = Math.ceil(ret.width / scale);\n    }\n    else if (height) {\n        ret.height  = height;\n        ret.width = Math.ceil(ret.height * scale);\n    }\n    // 超过这个值base64无法生成，在IOS上\n    while (ret.width >= 3264 || ret.height >= 2448) {\n        ret.width *= 0.8;\n        ret.height *= 0.8;\n    }\n    return ret;\n};\n\nLrz.prototype._getResize = function () {\n    var that        = this,\n        img         = that.img,\n        defaults    = that.defaults,\n        width       = defaults.width,\n        height      = defaults.height,\n        orientation = that.orientation;\n\n    var ret = {\n        width : img.width,\n        height: img.height\n    };\n\n    if (\"5678\".indexOf(orientation) > -1) {\n        ret.width  = img.height;\n        ret.height = img.width;\n    }\n    if (width || height) {\n        ret = this._getMaxSize(ret.width, ret.height, defaults);\n    } else if (defaults.minWidth || defaults.minHeight) {\n        ret = this._getMinSize(ret.width, ret.height, defaults);\n    } else if (defaults.customSize) {\n        ret = defaults.customSize(ret.width, ret.height, defaults);\n    }\n\n    // 如果原图小于设定，采用原图\n    if (ret.width < width || ret.height < height) {\n        return ret;\n    }\n\n    var scale = ret.width / ret.height;\n\n    if (width && height) {\n        if (scale >= width / height) {\n            if (ret.width > width) {\n                ret.width  = width;\n                ret.height = Math.ceil(width / scale);\n            }\n        } else {\n            if (ret.height > height) {\n                ret.height = height;\n                ret.width  = Math.ceil(height * scale);\n            }\n        }\n    }\n    else if (width) {\n        if (width < ret.width) {\n            ret.width  = width;\n            ret.height = Math.ceil(width / scale);\n        }\n    }\n    else if (height) {\n        if (height < ret.height) {\n            ret.width  = Math.ceil(height * scale);\n            ret.height = height;\n        }\n    }\n\n    // 超过这个值base64无法生成，在IOS上\n    while (ret.width >= 3264 || ret.height >= 2448) {\n        ret.width *= 0.8;\n        ret.height *= 0.8;\n    }\n\n    return ret;\n};\n\n/**\n * 获取当前js文件所在路径，必须得在代码顶部执行此函数\n * @returns {string}\n */\nfunction getJsDir (src) {\n    var script = null;\n\n    if (src) {\n        script = [].filter.call(document.scripts, function (v) {\n            return v.src.indexOf(src) !== -1;\n        })[0];\n    } else {\n        script = document.scripts[document.scripts.length - 1];\n    }\n\n    if (!script) return null;\n\n    return script.src.substr(0, script.src.lastIndexOf('/'));\n}\n\n\n/**\n * 转换成formdata\n * @param dataURI\n * @returns {*}\n *\n * @source http://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata\n */\nfunction dataURItoBlob (dataURI) {\n    // convert base64/URLEncoded data component to raw binary data held in a string\n    var byteString;\n    if (dataURI.split(',')[0].indexOf('base64') >= 0)\n        byteString = atob(dataURI.split(',')[1]);\n    else\n        byteString = unescape(dataURI.split(',')[1]);\n\n    // separate out the mime component\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\n    // write the bytes of the string to a typed array\n    var ia = new Uint8Array(byteString.length);\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n\n    return new BlobFormDataShim.Blob([ia.buffer], {type: mimeString});\n}\n\nwindow.lrz = function (file, opts) {\n    return new Lrz(file, opts);\n};\n\n// 版本号来自package.json，构建时自动填充\nwindow.lrz.version = '4.9.36';\n\nmodule.exports = window.lrz;\n\n/**\n *\n * 　　　┏┓　　　┏┓\n * 　　┏┛┻━━━┛┻┓\n * 　　┃　　　　　　　┃\n * 　　┃　　　━　　　┃\n * 　　┃　┳┛　┗┳　┃\n * 　　┃　　　　　　　┃\n * 　　┃　　　┻　　　┃\n * 　　┃　　　　　　　┃\n * 　　┗━┓　　　┏━┛Code is far away from bug with the animal protecting\n * 　　　　┃　　　┃    神兽保佑,代码无bug\n * 　　　　┃　　　┃\n * 　　　　┃　　　┗━━━┓\n * 　　　　┃　　　　　 ┣┓\n * 　　　　┃　　　　 ┏┛\n * 　　　　┗┓┓┏━┳┓┏┛\n * 　　　　　┃┫┫　┃┫┫\n * 　　　　　┗┻┛　┗┻┛\n *\n */\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lrz.js\n ** module id = 0\n ** module chunks = 0\n **/","null\n\n\n/** WEBPACK FOOTER **\n ** src/lib/Promise.js\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 2\n ** module chunks = 0 3\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n    try {\n        cachedSetTimeout = setTimeout;\n    } catch (e) {\n        cachedSetTimeout = function () {\n            throw new Error('setTimeout is not defined');\n        }\n    }\n    try {\n        cachedClearTimeout = clearTimeout;\n    } catch (e) {\n        cachedClearTimeout = function () {\n            throw new Error('clearTimeout is not defined');\n        }\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 3\n ** module chunks = 0 3\n **/","//@source https://xts.so/demo/compress/index.html\n\n// 早期版本的浏览器需要用BlobBuilder来构造Blob，创建一个通用构造器来兼容早期版本\nvar BlobConstructor = ((function () {\n    try {\n        new Blob();\n        return true;\n    } catch (e) {\n        return false;\n    }\n})()) ? window.Blob : function (parts, opts) {\n    var bb = new (\n        window.BlobBuilder\n        || window.WebKitBlobBuilder\n        || window.MSBlobBuilder\n        || window.MozBlobBuilder\n    );\n    parts.forEach(function (p) {\n        bb.append(p);\n    });\n\n    return bb.getBlob(opts ? opts.type : undefined);\n};\n\n// Android上的AppleWebKit 534以前的内核存在一个Bug，\n// 导致FormData加入一个Blob对象后，上传的文件是0字节\nfunction hasFormDataBug () {\n    var bCheck = ~navigator.userAgent.indexOf('Android')\n        && ~navigator.vendor.indexOf('Google')\n        && !~navigator.userAgent.indexOf('Chrome');\n\n    // QQ X5浏览器也有这个BUG\n    return bCheck && navigator.userAgent.match(/AppleWebKit\\/(\\d+)/).pop() <= 534 || /MQQBrowser/g.test(navigator.userAgent);\n}\nvar FormDataShim=(function(){\n    var formDataShimNums = 0;\n    return function FormDataShim () {\n        var\n        // Store a reference to this\n        o        = this,\n    \n        // Data to be sent\n        parts = [],\n    \n        // Boundary parameter for separating the multipart values\n        boundary = Array(21).join('-') + (+new Date() * (1e16 * Math.random())).toString(36),\n    \n        // Store the current XHR send method so we can safely override it\n        oldSend  = XMLHttpRequest.prototype.send;\n        this.getParts = function () {\n            return parts.toString();\n        };\n        this.append   = function (name, value, filename) {\n            parts.push('--' + boundary + '\\r\\nContent-Disposition: form-data; name=\"' + name + '\"');\n    \n            if (value instanceof Blob) {\n                parts.push('; filename=\"' + (filename || 'blob') + '\"\\r\\nContent-Type: ' + value.type + '\\r\\n\\r\\n');\n                parts.push(value);\n            }\n            else {\n                parts.push('\\r\\n\\r\\n' + value);\n            }\n            parts.push('\\r\\n');\n        };\n    \n        formDataShimNums++;\n        XMLHttpRequest.prototype.send = function (val) {\n            var fr,\n                data,\n                oXHR = this;\n    \n            if (val === o) {\n                // Append the final boundary string\n                parts.push('--' + boundary + '--\\r\\n');\n                // Create the blob\n                data = new BlobConstructor(parts);\n    \n                // Set up and read the blob into an array to be sent\n                fr         = new FileReader();\n                fr.onload  = function () {\n                    oldSend.call(oXHR, fr.result);\n                };\n                fr.onerror = function (err) {\n                    throw err;\n                };\n                fr.readAsArrayBuffer(data);\n    \n                // Set the multipart content type and boudary\n                this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n                formDataShimNums--;\n                if(formDataShimNums == 0){\n                    XMLHttpRequest.prototype.send = oldSend;\n                }\n            }\n            else {\n                oldSend.call(this, val);\n            }\n        };\n    };\n})();\n\n\nmodule.exports = {\n    Blob    : BlobConstructor,\n    FormData: hasFormDataBug() ? FormDataShim : FormData\n};\n\n\n\n/** WEBPACK FOOTER **\n ** src/lib/Blob.FormData.shim.js\n **/","null\n\n\n/** WEBPACK FOOTER **\n ** src/lib/exif.js\n **/"],"sourceRoot":""}